import{_ as n,e as a}from"./app.269ed0ef.js";var s="/SpringCloud/SpringCloudConfig\u8DEF\u5F84.jpg";const p={},e=a(`<h1 id="config" tabindex="-1"><a class="header-anchor" href="#config" aria-hidden="true">#</a> Config</h1><h2 id="\u76F8\u5173\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u4F9D\u8D56" aria-hidden="true">#</a> \u76F8\u5173\u4F9D\u8D56</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u670D\u52A1\u7AEF --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- \u5BA2\u6237\u7AEF --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 2020\u7248\u672CSpringCloud\u8BFB\u53D6bootstrap.yml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="\u4E0D\u4F7F\u7528-eureka-\u505A\u914D\u7F6E\u4E2D\u5FC3" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u4F7F\u7528-eureka-\u505A\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a> \u4E0D\u4F7F\u7528 Eureka \u505A\u914D\u7F6E\u4E2D\u5FC3</h2><h3 id="\u670D\u52A1\u7AEF\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u7AEF\u914D\u7F6E" aria-hidden="true">#</a> \u670D\u52A1\u7AEF\u914D\u7F6E</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8848</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
        <span class="token key atrule">config</span><span class="token punctuation">:</span>
            <span class="token key atrule">server</span><span class="token punctuation">:</span>
                <span class="token key atrule">git</span><span class="token punctuation">:</span>
                    <span class="token key atrule">password</span><span class="token punctuation">:</span> 06050704zxl
                    <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/pidehen2/spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>learn.git
                    <span class="token key atrule">username</span><span class="token punctuation">:</span> 1658272229@qq.com
    <span class="token key atrule">application</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5728\u4E3B\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0 <code>@EnableConfigServer</code> \u6CE8\u89E3\u5F00\u542F\u670D\u52A1\u3002</p><h3 id="\u67E5\u770B\u4ED3\u5E93\u4E2D\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u7684\u53EF\u9009\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u4ED3\u5E93\u4E2D\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u7684\u53EF\u9009\u8DEF\u5F84" aria-hidden="true">#</a> \u67E5\u770B\u4ED3\u5E93\u4E2D\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u7684\u53EF\u9009\u8DEF\u5F84</h3><p><img src="`+s+`" alt="\u67E5\u770B\u8DEF\u5F84"></p><p>application \u662F yaml \u4E2D\u5B9A\u4E49\u7684 <code>spring.application.name</code> \u7684\u503C\uFF0Cprofile \u662F yaml \u4E2D\u5B9A\u4E49\u7684 <code>spring.config.active.on-profile</code>\uFF0Clabel \u4E3A\u5206\u652F\u540D\u3002</p><h3 id="\u5BA2\u6237\u7AEF\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF\u914D\u7F6E" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF\u914D\u7F6E</h3><p>application.yml (\u7528\u6237\u7EA7\u914D\u7F6E\uFF0C\u4F18\u5148\u7EA7\u4F4E\u4E8E bootstrap.yml)\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>bootstrap.yml (\u7CFB\u7EDF\u7EA7\u914D\u7F6E\uFF0C\u4F18\u5148\u7EA7\u9AD8\u4E8E application.yml \u4F4E\u4E8E git \u4ED3\u5E93)\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#Config\u670D\u52A1\u5730\u5740</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> master <span class="token comment">#\u5206\u652F</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> application <span class="token comment">#git\u4ED3\u5E93\u4E2D\u6587\u4EF6\u540D</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev <span class="token comment">#\u9009\u62E9\u73AF\u5883</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">90</span> <span class="token comment"># \u7AEF\u53E3\u53F7\uFF0C\u82E5git\u4E2D\u6CA1\u6709\u914D\u7F6E\u7AEF\u53E3\u53F7\uFF0C\u8FD9\u91CC\u624D\u4F1A\u751F\u6548</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u7F16\u5199 Controller \u6D4B\u8BD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${teacher.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="\u4F7F\u7528-eureka" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-eureka" aria-hidden="true">#</a> \u4F7F\u7528 Eureka</h2><h3 id="\u670D\u52A1\u7AEF\u914D\u7F6E-1" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u7AEF\u914D\u7F6E-1" aria-hidden="true">#</a> \u670D\u52A1\u7AEF\u914D\u7F6E</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8848</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
        <span class="token key atrule">config</span><span class="token punctuation">:</span>
            <span class="token key atrule">server</span><span class="token punctuation">:</span>
                <span class="token key atrule">git</span><span class="token punctuation">:</span>
                    <span class="token key atrule">password</span><span class="token punctuation">:</span> 06050704zxl
                    <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/pidehen2/spring<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>learn.git
                    <span class="token key atrule">username</span><span class="token punctuation">:</span> 1658272229@qq.com
    <span class="token key atrule">application</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
    <span class="token key atrule">client</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
            <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost2<span class="token punctuation">:</span>7002/eureka/
    <span class="token key atrule">instance</span><span class="token punctuation">:</span>
        <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
        <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
    <span class="token key atrule">app.name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="\u5BA2\u6237\u7AEF\u914D\u7F6E-1" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF\u914D\u7F6E-1" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF\u914D\u7F6E</h3><p>bootstrap.yml\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> master
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">service-id</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>server
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> application
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//localhost2<span class="token punctuation">:</span>7002/eureka/
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">app.name</span><span class="token punctuation">:</span> config<span class="token punctuation">-</span>client
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="\u624B\u52A8\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#\u624B\u52A8\u5237\u65B0" aria-hidden="true">#</a> \u624B\u52A8\u5237\u65B0</h2><h3 id="\u6DFB\u52A0\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u4F9D\u8D56" aria-hidden="true">#</a> \u6DFB\u52A0\u4F9D\u8D56</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="\u4FEE\u6539-bootstrap-yml" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539-bootstrap-yml" aria-hidden="true">#</a> \u4FEE\u6539 bootstrap.yml</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment"># \u7C7B\u4F3CHystrix\uFF0C\u5C06\u5237\u65B0\u63A5\u53E3\u66B4\u9732</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u4FEE\u6539\u8981\u5237\u65B0\u7684\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u8981\u5237\u65B0\u7684\u7C7B" aria-hidden="true">#</a> \u4FEE\u6539\u8981\u5237\u65B0\u7684\u7C7B</h3><p>\u5728\u9700\u8981\u5237\u65B0\u7684\u7C7B\u4E0A\u4F7F\u7528 <code>@RefreshScope</code> \u6CE8\u89E3\u3002</p><h3 id="\u5237\u65B0" tabindex="-1"><a class="header-anchor" href="#\u5237\u65B0" aria-hidden="true">#</a> \u5237\u65B0</h3><p>\u4FEE\u6539 Git \u4E2D\u7684\u914D\u7F6E\u6587\u4EF6\u540E\uFF0C\u5411 <code>[IP]:[port]/actuator/refresh</code> \u53D1\u9001 POST \u8BF7\u6C42\uFF0C\u5373\u53EF\u5B9E\u73B0\u624B\u52A8\u5237\u65B0\u3002</p>`,32);function t(l,c){return e}var u=n(p,[["render",t]]);export{u as default};
