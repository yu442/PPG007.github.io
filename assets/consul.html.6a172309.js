import{_ as n,e as s}from"./app.269ed0ef.js";const a={},e=s(`<h1 id="consul" tabindex="-1"><a class="header-anchor" href="#consul" aria-hidden="true">#</a> Consul</h1><h2 id="\u5B89\u88C5-consul" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5-consul" aria-hidden="true">#</a> \u5B89\u88C5 Consul</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils
<span class="token function">sudo</span> yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
<span class="token function">sudo</span> yum -y <span class="token function">install</span> consul
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="\u542F\u52A8-consul-\u5E76\u5141\u8BB8\u5916\u7F51\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8-consul-\u5E76\u5141\u8BB8\u5916\u7F51\u8BBF\u95EE" aria-hidden="true">#</a> \u542F\u52A8 consul \u5E76\u5141\u8BB8\u5916\u7F51\u8BBF\u95EE</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>consul agent -dev   -client <span class="token number">0.0</span>.0.0 -ui
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="provider-\u6CE8\u518C\u5230-consul" tabindex="-1"><a class="header-anchor" href="#provider-\u6CE8\u518C\u5230-consul" aria-hidden="true">#</a> Provider \u6CE8\u518C\u5230 Consul</h2><p>\u6DFB\u52A0\u4F9D\u8D56\uFF0C\u5C06 Eureka \u4F9D\u8D56\u66FF\u6362\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3 <code>@EnableDiscoveryClient</code>\u3002</p><p>\u7F16\u5199 SpringBoot \u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8003</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> payment<span class="token punctuation">-</span>service
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.3.14<span class="token punctuation">:</span>3306<span class="token punctuation">?</span>serverTimezone=UTC
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> 123456zch@ZCH
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.3.14 <span class="token comment"># consul\u7684IP</span>
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span> <span class="token comment"># consul\u7684\u7AEF\u53E3</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">hostname</span><span class="token punctuation">:</span> 192.168.3.55 <span class="token comment"># \u672C\u670D\u52A1\u7684\u90E8\u7F72IP</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> payment<span class="token punctuation">-</span>service <span class="token comment"># \u672C\u670D\u52A1\u7684\u540D\u5B57</span>

<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">table-prefix</span><span class="token punctuation">:</span> spring_cloud.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="consumer-\u6CE8\u518C\u5230-consul" tabindex="-1"><a class="header-anchor" href="#consumer-\u6CE8\u518C\u5230-consul" aria-hidden="true">#</a> Consumer \u6CE8\u518C\u5230 Consul</h2><p>\u4F9D\u8D56\u4E0E Provider \u76F8\u540C\u3002</p><p>\u4E3B\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3 <code>@EnableDiscoveryClient</code>\u3002</p><p>\u7F16\u5199 SpringBoot \u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> order<span class="token punctuation">-</span>service<span class="token punctuation">-</span>zk<span class="token punctuation">-</span><span class="token number">80</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.3.14<span class="token punctuation">:</span>3306<span class="token punctuation">?</span>serverTimezone=UTC
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> 123456zch@ZCH
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.3.14
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">hostname</span><span class="token punctuation">:</span> 192.168.3.14
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> order<span class="token punctuation">-</span>service<span class="token punctuation">-</span>consul<span class="token punctuation">-</span><span class="token number">80</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div>`,16);function p(t,l){return e}var o=n(a,[["render",p]]);export{o as default};
